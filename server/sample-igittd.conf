# Sample configuration file for igittd
# (Section names are optional, but here for clarity)

[Server]
# Debugging level
# 0 = Warn, 1 = Info, 2 = Debug
# Default: 0
; debug-level = 0

# Our own URL
own-url = https://hagrid.snakeoil

# Webroot, if it needs to serve any web pages
webroot = /var/lib/igitt/web

# Listening address and port
# Default: 127.0.0.1 and 8080
; listen-address = ::1
; listen-port = 8080
listen-port = 15177

# Maximum of simultaneous signature operations
# Please note that GnuPG serializes all private key operations through
# a single, single-threaded gpg-agent, resulting in almost no parallelism
# gain. So increasing this probably does not start using significantly more
# than one core, sorry!
# Default: 2
; max-parallel-signatures = 2

# Maximum waiting time for a signature operation slot
# When `max-parallel-signatures` signatures are already being signed,
# *additional* requests will wait up to `max-parallel-timeout` seconds
# for an available signature process before being rejected.
# Default: None (forever)
# Can be set to a floating-point value to define the number of seconds
; max-parallel-timeout = 3.14

[GIT]
# The GIT repository to use; needs to be initialized with `git init`
repository = /var/lib/igitt/repo

# Rotate/commit/publish interval and offset
# `commit-interval`: Duration of the interval.
# `commit-offset`: Time relative to the start of the interval.
#
# It is important that the activity times do not cluster up, so please use
# an offset which nobody else uses; and an offset of 0 is generally not
# advisable, as other systems will already have activity then.
#
# So chose an interval reflecting the frequency you want to commit and publish,
# and chose a seemingly random offset in that period. Try to avoid the full
# hours and/or minutes, whenever possible; i.e., specify non-zero
# minutes/seconds. See `.../doc/ServerList.md` for additional advice.
#
# The interval and offset are relative to UTC (actually, relative to the Epoch,
# i.e., 1970-01-01 00:00:00 UTC)
#
# :warning: If you are using the PGP Timestamper as an upstream
# commitment, please make sure that this does not trigger more than once
# an hour. (The PGP Timestamper can delay the commit by 5 minutes and
# more and the IGITT will wait for an answer for up to 15 minutes
# before continuing, so anything more frequent than this will cause
# chaos in your repository.)
#
# When using the PGP Timestamper as an upstream commitmemnt, the 
# actual commit will be delayed by up to 15 minutes. The rotation/
# commit process starts at the time specified.
#
# Time format: (Fractional) days, hours, minutes, and seconds,
# optionally separated by spaces, e.g. "1.5d", "3h 7m 3.5s", "8h20m17s"
#
# Examples:
# - commit-interval=1d, commit-offset=7h37m16s
# - commit-interval=4h, commit-offset=1h18m44s
# - commit-interval=1h, commit-offset=23m17s
# Default: 4h
; commit-interval = 4h

# Assigning no value will pick a random offset at every service start.
# Default: random in [0, commit-interval)
; commit-offset =

# List of branches to push
# If empty, the GIT default value is used
; push-branches = master gitta-timestamps dumbledore-timestamps
; push-branches = --all

[GnuPG]
# The place where to look for the GnuPG files
# Default: ~/.gnupg
; gnupg-home = /var/lib/igitt/.gnupg

# Our own PGP key used to timestamp with
# This key should be created for this purpose only!
# Use a long signing key, see ../doc/Cryptography.md for more information
; keyid = 0123456789ABCDEF

[IGITT Upstream]
# Upstream IGITT servers
# Should not include itself
# Any number of <branch>=<URL> tuples
# Default: None
; upstream-timestampers = [ gitta-timestamps=https://gitta.notar-e.com, dumbledore-timestamps=https://dumbledore.snakeoil ]

[PGP Timestamper]
# Our email address to use when communicating with the PGP timestamper
# Setting this activates using the PGP timestamper as an upstream
; email-address = timestomper@hagrid.snakeoil

# The key ID the stamper uses
# :warning: Needs to have been imported into the public keyring!
# Default: 70B61F81
; external-pgp-timestamper-keyid = 70B61F81

# The email address of the timestamping service
# Default: clear@stamper.itconsult.co.uk
; external-pgp-timestamper-address = clear@stamper.itconsult.co.uk

# IMAP and SMTP server names to use, username and password for
# authentication.
# IMAP and SMTP servers names may optionally be suffixed by `:<port>`.
# That port (or the default ports 143 and 587, respectively) *must*
# support STARTTLS. Direct TLS connections are not supported.
; imap-server = imap.hagrid.snakeoil
; smtp-server = smtp.hagrid.snakeoil
; mail-username = timestomper@hagrid.snakeoil
; mail-password = OlympeMaxime
